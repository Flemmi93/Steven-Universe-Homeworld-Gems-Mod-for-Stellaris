#############
# Building Documentation
#############

# might be outdated/contain untested features
building_gem_spire1 = {
	base_buildtime = @b1_time
	position_priority = 200
	base_cap_amount = 2
	
	category = amenity
	
	building_sets = {
		government
		urban
		research
	}

	potential = {
		exists = owner
		is_geo_empire = yes
	}
	
	allow = {
		# buildings_simple_allow = yes
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				has_origin = origin_crystal_gems
				is_geo_empire = yes
			}
		}
	}

	triggered_planet_modifier = {
		potential = { exists = owner owner = { is_geo_empire = yes } }
		job_politician_add = 25
		planet_researchers_produces_mult = 0.0125
 		planet_researchers_upkeep_mult = 0.0125
	}

	inline_script = {
		script = jobs/researchers_add
		AMOUNT = @building_static_jobs_3
	}
	
	resources = {
		category = planet_buildings
		upkeep = {
			energy =  @b1_upkeep
		}
		cost = {
			minerals = @b1_minerals
		}
	}
	
	upgrades = {
		building_gem_spire2
	}

	ai_weight = {
		base = 1000
		modifier = {
			factor = 0.1
			or = {
				has_building = building_gem_spire1
				has_building = building_gem_spire2
				has_building = building_gem_spire3
			}
		}
	}
}

building_gem_spire2 = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 200
	
	category = amenity
	
	building_sets = {
		government
		urban
		research
	}

	potential = {
		exists = owner
		is_geo_empire = yes
	}
	
	allow = {
		has_upgraded_capital = yes
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				has_origin = origin_crystal_gems
				is_geo_empire = yes
			}
		}
	}
	
	triggered_planet_modifier = {
		potential = { owner = { is_geo_empire = yes } }
		job_politician_add = 50
		planet_researchers_produces_mult = 0.025
 		planet_researchers_upkeep_mult = 0.015
	}
	
	inline_script = {
		script = jobs/researchers_add
		AMOUNT = @building_static_jobs_high_3
	}
	
	resources = {
		category = planet_buildings
		upkeep = {
		energy =  @b2_upkeep
		}
		cost = {
		minerals = @b2_minerals
		}
	}
	
	upgrades = {
		building_gem_spire3
	}
	
	ai_weight = {
		base = 1000
	}
}

building_gem_spire3 = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 200
	
	category = amenity
	
	building_sets = {
		government
		urban
		research
	}

	potential = {
		exists = owner
		is_geo_empire = yes
	}
	
	allow = {
		has_upgraded_capital = yes
		OR = {
			is_capital = yes
			owner = { has_technology = tech_housing_1 }
		}
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				is_geo_empire = yes
				has_origin = origin_crystal_gems
			}
		}
	}
	
	triggered_planet_modifier = {
		potential = { owner = { is_geo_empire = yes } }
		job_politician_add = 75
		planet_researchers_produces_mult = 0.05
 		planet_researchers_upkeep_mult = 0.025
	}
	
	inline_script = {
		script = jobs/researchers_add
		AMOUNT = @building_static_jobs_very_high_3
	}
	
	resources = {
		category = planet_buildings
		upkeep = {
		energy =  @b2_upkeep
		}
		cost = {
		minerals = @b2_minerals
		}
	}
	
	ai_weight = {
		base = 1000
	}
}

building_buff_kindergarten1 = {
	base_buildtime = @b1_time
	planet_limit = 1

	category = pop_assembly

	building_sets = {
		government
		urban
	}


	# is_essential = yes
	# additional_ai_weight = 2000
	# ai_estimate_without_unemployment = yes
	
	position_priority = 10
	can_demolish = yes
	
	potential = {
		exists = owner
		owner = {
			OR = {
				is_geo_empire = yes
			}
		}
	}
	
	allow = {
		OR = {
			is_geo_empire = yes
		}
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				is_geo_empire = yes
				has_origin = origin_crystal_gems
			}
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}			
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 100
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}
		}
		text = job_kindergartner_effect_desc
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_authority = auth_hive_mind
			}
		}
		modifier = { # Adjust for Balance
			job_spawning_drone_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_crystal_gems }		
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 100
		}
	}
	
	resources = {
		category = planet_buildings
		produces = {
		}
		upkeep = {
		energy =  1
			minerals =  @b1_upkeep
		}
		cost = {
			minerals = @b1_minerals
		}
	}
	on_built = {
		if = {
			limit = { NOT = { is_variable_set = gem_pops_made } }
			set_variable = { which = gem_pops_made value = 0 }
		}
	}
	upgrades = {
		building_buff_kindergarten2
	}
}


building_buff_kindergarten2 = {
	base_buildtime = @b2_time
	planet_limit = 1

	category = pop_assembly

	building_sets = {
		government
		urban
	}


	is_essential = yes
	additional_ai_weight = 2000
	ai_estimate_without_unemployment = yes
	
	position_priority = 10
	can_demolish = yes
	
	can_build = no
	
	potential = {
		exists = owner
		owner = {
			OR = { 
				is_geo_empire = yes
				has_origin = origin_crystal_gems
			} 
		}
	}
	
	allow = {
		has_upgraded_capital = yes
		owner = { has_technology = tech_housing_1 }
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				has_origin = origin_crystal_gems
				is_geo_empire = yes
			}
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}			
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 200
		}
	}
 
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}
		}
		text = job_kindergartner_effect_desc
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				has_authority = auth_hive_mind
			}
		}
		modifier = { # Adjust for Balance
			job_spawning_drone_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_crystal_gems }		
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 200
		}
	}
	
	resources = {
		category = planet_buildings
		produces = {
		}
		upkeep = {
		energy =  1
			minerals =  @b2_upkeep
		}
		cost = {
			minerals = @b2_minerals
		}
	}
	upgrades = {
		building_buff_kindergarten3
	}
	ai_weight = {
		base = 1000
	}
}

building_buff_kindergarten3 = {
	base_buildtime = @b3_time
	planet_limit = 1

	category = pop_assembly

	building_sets = {
		government
		urban
	}


	is_essential = yes
	additional_ai_weight = 2000
	ai_estimate_without_unemployment = yes
	
	position_priority = 10
	can_demolish = yes
	
	can_build = no
	
	potential = {
		exists = owner
		owner = {
			OR = {
				#has_origin = origin_crystal_gems
				is_geo_empire = yes
			} 
		}
	}
	
	allow = {
		owner = { has_technology = tech_housing_2 }		# make it so planet acension level 1 has to be reached for this
		# OR = {
		# 	has_deposit = d_kindergarten_small
		# 	has_deposit = d_kindergarten_med
		# 	has_deposit = d_kindergarten_large
		# }
	}
	
	destroy_trigger = {
		owner = {
			NOR = {
				has_origin = origin_crystal_gems
				is_geo_empire = yes
			}
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}			
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 300
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_geo_empire = yes
				NOT = { has_authority = auth_hive_mind }
			}
		}
		text = job_kindergartner_effect_desc
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				has_authority = auth_hive_mind
			}
		}
		modifier = { # Adjust for Balance
			job_spawning_drone_add = 300
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_crystal_gems }		
		}
		modifier = { # Adjust for Balance
			job_kindergartner_add = 300
		}
	}
	
	resources = {
		category = planet_buildings
		produces = {
		}
		upkeep = {
		energy =  1
			minerals =  @b3_upkeep
		}
		cost = {
			minerals = @b3_minerals
		}
	}
	ai_weight = {
		base = 1000
	}
}
building_crystal_gem_temple = {
	base_buildtime = @b1_time
	position_priority = 1
	
	category = amenity
	
	building_sets = {
		government
	}

	potential = {
		exists = owner
		NOT = { always = yes }
	}
	
	allow = {
		owner = { has_origin = origin_crystal_gems }
		NOT = { has_building = building_crystal_gem_temple }
	}
	
	
	planet_modifier = {
	}
	
	resources = {
		category = planet_buildings
		produces = {
		unity = 2
		energy = 2
		food = 2
		minerals = 2
		alloys = 2
		consumer_goods = 2
		}
		upkeep = {
		energy =  @b1_upkeep
		}
		cost = {
		minerals = @b1_minerals
		}
	}
}

building_gem_sky_arena = {
	
	base_buildtime = @b1_time
	position_priority = 200
	base_cap_amount = 1
	
	category = amenity
	
	building_sets = {
		government
		urban
	}

	potential = {
		exists = owner
		is_geo_empire = yes
	}
	
	ai_weight = {
		base = @gem_building_forced_weight
		modifier = {
			factor = 0 
			has_building = building_gem_sky_arena
		}
	}

	resources = {
		category = planet_buildings
		upkeep = {
			energy =  @b1_upkeep
		}
		cost = {
			minerals = @b1_minerals
		}
	}

	triggered_planet_modifier = {
		potential = {
			is_geo_empire = yes
		}
		modifier = { # Adjust for Balance
			job_politician_add = 50
			job_entertainer_add = 150
			job_soldier_add = 200
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_geo_empire = no
			}
		}
		modifier = { # Adjust for Balance
			job_politician_add = 10
			job_knight_add = 100
			job_squire_add = 150
			job_entertainer_add = 50
		}
	}
	
}